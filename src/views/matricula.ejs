<!DOCTYPE html>
<html lang="en">
<head>
   <%- include('partials/head'); %>
   
    <title>Formulário de Matrícula</title>
    <style>
       
        .navbar-nav .nav-link {
            color: white;
            font-size: 1rem;
        }

        .navbar-nav .nav-link:hover {
            color: #e9ecef;
        }



        .form-group {
            margin-bottom: 5px;
        }

        .form-group label {
            font-weight: bold;
        }

        .form-group select, 
        .form-group input[type="checkbox"] {
            margin-right: 10px;
        }

        .disciplinas-container {
            display: flex;
            flex-direction: column;
        }

        .disciplinas-container p {
            margin: 0;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }

        .disciplinas-container input[type="checkbox"] {
            margin-right: 10px;
        }

        .error {
            color: red;
            font-size: 0.9em;
        }

        .btn-custom {
            background-color: rgb(115, 115, 141);
            border-color:  rgb(115, 115, 141);
            color: #ffffff;
            width: 100%;
        }

        .btn-custom:hover {
            background-color: rgb(115, 115, 141);
            border-color:  rgb(115, 115, 141);
        }

    </style>
</head>


<body class="container">
    <header>
        <%- include('partials/headerAluno'); %>
    </header>

    <main>
        <section>
                <h3>Formulário de Matrícula</h3>
                <form id="matriculaForm" action="/api/matricula" method="POST">
                    <!-- Seleção do Curso -->
                    <div class="form-group">
                        <label for="curso">Selecione o Curso:</label>
                        <select id="curso" name="curso" class="form-select" required>
                            <option value="">Selecione um curso</option>
                            <option value="Biomedicina">Biomedicina</option>
                            <option value="Direito">Direito</option>
                            <option value="Enfermagem">Enfermagem</option>
                            <option value="Fisioterapia">Fisioterapia</option>
                            <option value="Medicina">Medicina</option>
                            <option value="Medicina Veterinária">Medicina Veterinária</option>
                            <option value="Psicologia">Psicologia</option>
                            <option value="Engenharia Civil">Engenharia Civil</option>
                            <option value="Engenharia Química">Engenharia Química</option>
                            <option value="Engenharia Mecânica">Engenharia Mecânica</option>
                        </select>
                    </div>
    
                    <div class="form-group">
                        <label for="periodo">Selecione o período:</label>
                        <select id="periodo" name="periodo" class="form-select" required>
                            <option value="">Selecione o período</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                        </select>
                    </div>
    
                    <!-- Disciplinas Obrigatórias -->
                    <div class="form-group">
                        <label>Selecione as 4 Disciplinas Obrigatórias:</label>
                        <div class="disciplinas-container">
                            <p><input type="checkbox" name="obrigatorias" class="obrigatoria" value="Disciplina 1">Disciplina 1</p>
                            <p><input type="checkbox" name="obrigatorias" class="obrigatoria" value="Disciplina 2">Disciplina 2</p>
                            <p><input type="checkbox" name="obrigatorias" class="obrigatoria" value="Disciplina 3">Disciplina 3</p>
                            <p><input type="checkbox" name="obrigatorias" class="obrigatoria" value="Disciplina 4">Disciplina 4</p>
                            <p><input type="checkbox" name="obrigatorias" class="obrigatoria" value="Disciplina 5">Disciplina 5</p>
                            <p><input type="checkbox" name="obrigatorias" class="obrigatoria" value="Disciplina 6">Disciplina 6</p>
                        </div>
                        <div id="obrigatoriaError" class="error"></div>
                    </div>
    
                    <!-- Disciplinas Optativas -->
                    <div class="form-group">
                        <label>Selecione as 2 Disciplinas Alternativas:</label>
                        <div class="disciplinas-container">
                            <p><input type="checkbox" name="optativas" class="optativa" value="Disciplina 1">Disciplina 1</p>
                            <p><input type="checkbox" name="optativas" class="optativa" value="Disciplina 2">Disciplina 2</p>
                            <p><input type="checkbox" name="optativas" class="optativa" value="Disciplina 3">Disciplina 3</p>
                            <p><input type="checkbox" name="optativas" class="optativa" value="Disciplina 4">Disciplina 4</p>
                            <p><input type="checkbox" name="optativas" class="optativa" value="Disciplina 5">Disciplina 5</p>
                            <p><input type="checkbox" name="optativas" class="optativa" value="Disciplina 6">Disciplina 6</p>
                        </div>
                        <div id="optativaError" class="error"></div>
                    </div>
    
                    <button type="submit" class="btn btn-custom">Enviar</button>
                </form>
    
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        let obrigatorias = document.querySelectorAll('input[name="obrigatorias"]');
                        let optativas = document.querySelectorAll('input[name="optativas"]');
    
                        obrigatorias.forEach((checkbox) => {
                            checkbox.addEventListener('change', function() {
                                let checkedCount = document.querySelectorAll('input[name="obrigatorias"]:checked').length;
                                if (checkedCount > 4) {
                                    this.checked = false;
                                    alert('Você pode selecionar no máximo 4 disciplinas obrigatórias.');
                                }
                            });
                        });
    
                        optativas.forEach((checkbox) => {
                            checkbox.addEventListener('change', function() {
                                let checkedCount = document.querySelectorAll('input[name="optativas"]:checked').length;
                                if (checkedCount > 2) {
                                    this.checked = false;
                                    alert('Você pode selecionar no máximo 2 disciplinas alternativas.');
                                }
                            });
                        });
    
                        document.getElementById('matriculaForm').addEventListener('submit', function(event) {
                            event.preventDefault();
                            
                            let obrigatoriasChecked = document.querySelectorAll('input[name="obrigatorias"]:checked').length;
                            let optativasChecked = document.querySelectorAll('input[name="optativas"]:checked').length;
                            let obrigatoriaError = document.getElementById('obrigatoriaError');
                            let optativaError = document.getElementById('optativaError');
    
                            obrigatoriaError.textContent = '';
                            optativaError.textContent = '';
    
                            if (obrigatoriasChecked !== 4) {
                                obrigatoriaError.textContent = 'Você deve selecionar exatamente 4 disciplinas obrigatórias.';
                            }
    
                            if (optativasChecked !== 2) {
                                optativaError.textContent = 'Você deve selecionar exatamente 2 disciplinas alternativas.';
                            }
    
                            if (obrigatoriasChecked === 4 && optativasChecked === 2) {
                                this.submit(); 
                            }
                        });
                    });
                </script>
            
        </section>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    </main>
</body>
</html>