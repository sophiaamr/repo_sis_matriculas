<!DOCTYPE html>
<html lang="en">
<head>
   <%- include('partials/head'); %>

   <style>
    .nav-link {
      color: white;
    }

    .hidden {
      display: none;
    }

    /* Estilos para telas menores que 1340px */
    @media (max-width: 1340px) {
      .col-2, .col-3, .col-4, .col-9 {
        flex: 1 1 100%;
        max-width: 100%;
      }

      .card {
        width: 100%;
        margin-bottom: 20px; /* Espaçamento entre os cards em telas menores */
      }

      .container.col-3 {
        margin-top: 20px; /* Espaçamento superior quando a coluna é colocada abaixo dos cards */
      }
    }

    /* Estilos para telas menores que 430px */
    @media (max-width: 430px) {
      .col-5 {
        flex: 1 1 100%;
        max-width: 100%;
        margin-top: 20px;
      }
    }
   </style>
</head>

<body class="container">
    <header>
        <%- include('partials/headerProf'); %>
    </header>
    <section>
      <div class="row">
          <div class="col-7">
              <div class="row mb-3">
                  <% cursos.forEach(curso => { %>
                      <div class="col-4">
                          <div class="card">
                              <div class="card-body">
                                  <h5 class="card-title"><%= curso.nome %></h5>
                                  <p class="card-text"><%= curso.numCredito %> créditos</p>
                                  <button onclick="showDisciplinas(<%= curso.idCurso %>)" class="btn btn-primary">Ver Disciplinas</button>
                              </div>
                          </div>
                      </div>
                  <% }); %>
              </div>
          </div>

          <div class="container col-5 hidden" id="disciplinasContainer">
              <h3>Lista de Disciplinas</h3>
              <ul id="disciplinasList" class="list-group">
                  <!-- A lista de disciplinas será inserida aqui pelo JavaScript -->
              </ul>
          </div>
      </div>
  </section>

  <script>
    // Dados injetados de forma segura
    const disciplinas = <%- JSON.stringify(disciplinas || []) %>;

    function showDisciplinas(idCurso) {
        const container = document.getElementById('disciplinasContainer');
        const list = document.getElementById('disciplinasList');

        // Limpar a lista existente
        list.innerHTML = '';

        // Filtrar e mostrar disciplinas do curso selecionado
        const disciplinasDoCurso = disciplinas.filter(disciplina => disciplina.idCurso === idCurso);
        disciplinasDoCurso.forEach(disciplina => {
            const listItem = document.createElement('li');
            listItem.textContent = disciplina.nomeDisciplina;
            listItem.classList.add('list-group-item');
            list.appendChild(listItem);
        });

        container.classList.remove('hidden');
    }
</script>
    
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    

</body>

</html>
